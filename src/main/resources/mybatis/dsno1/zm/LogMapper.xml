<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.yy.mapper.dsno1.zm.LogMapper">

    <!--表名 -->
    <sql id="tableName">
        ZM_LOG
    </sql>

    <!--数据字典表名 -->
    <sql id="dicTableName">
        SYS_DICTIONARIES
    </sql>

    <!-- 字段 -->
    <sql id="Field">
        f
        .
        Operator
        ,
		f.OperationTime,	
		f.Content,	
		f.PLC,	
		f.IP,	
		f.Extend1,	
		f.Extend2,	
		f.Extend3,	
		f.LOG_ID
    </sql>

    <!-- 字段用于新增 -->
    <sql id="Field2">
        Operator
        ,
		OperationTime,	
		Content,	
		PLC,	
		IP,	
		Extend1,	
		Extend2,	
		Extend3,	
		LOG_ID
    </sql>

    <!-- 字段值 -->
    <sql id="FieldValue">
        #{Operator}
        ,
        #{OperationTime},
        #{Content},
        #{PLC},
        #{IP},
        #{Extend1},
        #{Extend2},
        #{Extend3},
        #{LOG_ID}
    </sql>

    <!-- 新增-->
    <insert id="save" parameterType="pd">
        insert into
        <include refid="tableName"></include>
        (
        <include refid="Field2"></include>
        ) values (
        <include refid="FieldValue"></include>
        )
    </insert>

    <!-- 删除-->
    <delete id="delete" parameterType="pd">
        delete from
        <include refid="tableName"></include>
        where
        LOG_ID = #{LOG_ID}
    </delete>

    <!-- 修改 -->
    <update id="edit" parameterType="pd">
        update
        <include refid="tableName"></include>
        set
        Operator = #{Operator},
        OperationTime = #{OperationTime},
        Content = #{Content},
        PLC = #{PLC},
        IP = #{IP},
        Extend1 = #{Extend1},
        Extend2 = #{Extend2},
        Extend3 = #{Extend3},
        LOG_ID = LOG_ID
        where
        LOG_ID = #{LOG_ID}
    </update>

    <!-- 通过ID获取数据 -->
    <select id="findById" parameterType="pd" resultType="pd">
        select
        <include refid="Field"></include>
        from
        <include refid="tableName"></include>
        f
        where
        f.LOG_ID = #{LOG_ID}
    </select>

    <!-- 列表 -->
    <select id="datalistPage" parameterType="page" resultType="pd">
        select
        <include refid="Field"></include>
        from
        <include refid="tableName"></include>
        f
        where 1=1
        <if test="pd.KEYWORDS != null and pd.KEYWORDS != ''"><!-- 关键词检索 -->
            and
            Operator LIKE '%'+ #{pd.KEYWORDS}+'%'
        </if>
        <if test="pd.KEYWORDS1 != null and pd.KEYWORDS1 != ''"><!-- 关键词检索 -->
            and
            Content LIKE '%'+ #{pd.KEYWORDS1}+'%'
        </if>
        <if test="pd.KEYWORDS2 != null and pd.KEYWORDS2 != ''"><!-- 关键词检索 -->
            and
            OperationTime LIKE '%'+ #{pd.KEYWORDS2}+'%'
        </if>
        <if test="pd.KEYWORDS3 != null and pd.KEYWORDS3 != ''"><!-- 关键词检索 -->
            and
            Extend2 LIKE '%'+ #{pd.KEYWORDS3}+'%'
        </if>
        [fhstart] ORDER BY OperationTime DESC [fhend]
    </select>

    <!-- 列表(全部) -->
    <select id="listAll" parameterType="pd" resultType="pd">
        select
        <include refid="Field"></include>
        from
        <include refid="tableName"></include>
        f
        where 1=1
        <if test="KEYWORDS != null and KEYWORDS != ''"><!-- 关键词检索 -->
            and
            Operator LIKE '%'+ #{KEYWORDS}+'%'
        </if>
        <if test="KEYWORDS1 != null and KEYWORDS1 != ''"><!-- 关键词检索 -->
            and
            Content LIKE '%'+ #{KEYWORDS1}+'%'
        </if>
        <if test="KEYWORDS2 != null and KEYWORDS2 != ''"><!-- 关键词检索 -->
            and
            OperationTime LIKE '%'+ #{KEYWORDS2}+'%'
        </if>
        <if test="KEYWORDS3 != null and KEYWORDS3 != ''"><!-- 关键词检索 -->
            and
            Extend2 LIKE '%'+ #{KEYWORDS3}+'%'
        </if>
        ORDER BY OperationTime DESC
    </select>

    <!-- 批量删除 -->
    <delete id="deleteAll" parameterType="String">
        delete from
        <include refid="tableName"></include>
        where
        LOG_ID in
        <foreach item="item" index="index" collection="array" open="(" separator="," close=")">
            #{item}
        </foreach>
    </delete>

    <!-- yy356703572qq(彬耶) -->
</mapper>